##############################
# üõ† APP MODE / RUNTIME
##############################
NODE_ENV=development          # Vercel pe "production" hoga
PORT=3000                     # Local / dev ke liye; Vercel apna port set karta hai

##############################
# üóÑ DATABASE
##############################
# MongoDB connection string (Atlas / private cluster)
MONGO_URI=mongodb+srv://user:pass@cluster/dbname

##############################
# üîê JWT & COOKIES
##############################
# JWT secrets ‚Äì inko strong random string rakho
SECRET_KEY_ACCESS_TOKEN=change_this_access_secret_key_now
SECRET_KEY_REFRESH_TOKEN=change_this_refresh_secret_key_now

# Simple cookie scheme (authMiddleware.ts use karega)
COOKIE_ACCESS_TOKEN=accessToken
COOKIE_REFRESH_TOKEN=refreshToken

# Agar tum purana "student/staff alag cookie" wala flow use karna chaho
# to ye bhi rakh sakte ho (current JS login controller inka use karta hai):
COOKIE_STUDENT_ACCESS=studentAccessToken
COOKIE_STUDENT_REFRESH=studentRefreshToken
COOKIE_STAFF_ACCESS=staffAccessToken
COOKIE_STAFF_REFRESH=staffRefreshToken

# Cookie security flags
# Vercel + alag frontend domain => SECURE=true, SAMESITE=None best
COOKIE_SECURE=true
COOKIE_SAME_SITE=None          # Lax / Strict / None

# Header-token allow for Postman / internal tools
ALLOW_HEADER_TOKENS=false      # true sirf testing / internal tools me

##############################
# üîë ENCRYPTION (Email encrypt/decrypt)
##############################
# 32 bytes key as HEX (64 chars). Example generate: `openssl rand -hex 32`
ENCRYPTION_SECRET_KEY=0000000000000000000000000000000000000000000000000000000000000000

##############################
# üìß EMAIL SERVICE (Microsoft Graph - app-only)
##############################
# Abhi jo sendEmail() utility hai wo **client_credentials** (app-only) use kar raha hai
# usme refresh token ki zaroorat nahi hai.

MS_TENANT_ID=
MS_CLIENT_ID=
MS_CLIENT_SECRET=
MS_MAIL_SENDER=attendance@gecbanka.org
GRAPH_API_BASE=https://graph.microsoft.com/v1.0

# OPTIONAL: agar future me "graph_user + refresh token" par wapas jana ho:
# (current code isko use nahi karta, sirf reference ke liye rakha hai)
AZURE_REFRESH_TOKEN=

# (Optional) driver flag, future toggle ke liye
EMAIL_DRIVER=graph_app   # graph_app | graph_user | smtp (abhi code me strictly use nahi ho raha)

##############################
# üî¢ OTP CONFIG
##############################
OTP_MAX_PER_DAY=3            # per-user per-day limit
OTP_EXPIRE_MINUTES=10        # minutes

##############################
# üè´ COLLEGE EMAIL RULES
##############################
STUDENT_EMAIL_DOMAIN=gecbanka.org
STAFF_EMAIL_DOMAIN=gecbanka.org
ALLOWED_EMAIL_DOMAINS=gecbanka.org

##############################
# üìÖ BIOMETRIC PARSER RULES
##############################
BIOMETRIC_MAX_LINES=100000     # safety cutoff
BIOMETRIC_REGNO_LENGTH=11
BIOMETRIC_ALLOW_FUTURE_DATES=false

##############################
# üïò ATTENDANCE LOGIC / CALENDAR
##############################
# Ye abhi mostly design-level hain, code me directly use kam ho raha,
# lekin future logic ke liye yahi rakhenge.

ATTENDANCE_PRESENT_DEFAULT=true

# Calendar rules (frontend + future backend calculations ke liye)
ENABLE_SUNDAYS_OFF=true
ENABLE_HOLIDAYS=true

# Conflict policy ‚Äì latest upload wins
ATTENDANCE_CONFLICT_POLICY=latest

##############################
# üë®‚Äçüéì REGISTRATION NUMBER PARSING
##############################
# Example: 23104134010
# 23 -> batch prefix
# 104 -> branch code
# 010 -> roll

BATCH_PREFIX_LENGTH=2        # "23" ‚Üí 2023-27 batch
BRANCH_CODE_POSITION=2       # index jaha se 104 start hota (0-based vs 1-based ka dhyan future me logic likhte time)
BRANCH_CODE_LENGTH=3         # "103", "104", etc.
ROLL_NUMBER_LENGTH=3         # last 3 digits

##############################
# üåê CORS & SECURITY
##############################
# Comma separated list of allowed origins for frontend
# e.g. "https://gec-attendance.vercel.app,https://admin.g..."
CORS_ALLOWED_ORIGINS=*

# Global rate limit (security.middleware.ts)
RATE_LIMIT_WINDOW_MS=900000   # 15 min in ms
RATE_LIMIT_MAX=300            # 300 requests / window / IP

##############################
# üîê INTERNAL SECRET HEADER
##############################
# x-internal-secret header ka value (frontend/backoffice me hi use hoga)
FRONTEND_SECRET_HEADER_KEY=change_this_frontend_secret_key_now

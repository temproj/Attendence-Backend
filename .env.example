##############################
# ðŸ” SECURITY & TOKENS
##############################
SECRET_KEY_ACCESS_TOKEN=change_this_access_secret_key_now
SECRET_KEY_REFRESH_TOKEN=change_this_refresh_secret_key_now

# Cookie names (separate for student vs staff)
COOKIE_STUDENT_ACCESS=studentAccessToken
COOKIE_STUDENT_REFRESH=studentRefreshToken
COOKIE_STAFF_ACCESS=staffAccessToken
COOKIE_STAFF_REFRESH=staffRefreshToken

# Cookie security
COOKIE_SECURE=true
COOKIE_SAME_SITE=None  # If using frontend on different domain

ALLOW_HEADER_TOKENS=false   # true only for Postman/internal use


##############################
# ðŸ§‘â€ðŸ’» EMAIL SERVICE CONFIG
##############################
EMAIL_DRIVER=graph_user   # graph_user | graph_app | smtp

# Azure OAuth (using student mailbox refresh token login)
AZURE_TENANT_ID=
AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=
AZURE_REFRESH_TOKEN=
SENDER_EMAIL=   # Ex: 23104134010@gecbanka.org

GRAPH_API_BASE=https://graph.microsoft.com/v1.0

# OTP Settings
OTP_MAX_PER_DAY=3
OTP_EXPIRE_MINUTES=10


##############################
# ðŸ—„ DATABASE
##############################
MONGO_URI=   # Atlas/private cluster URL


##############################
# ðŸ« COLLEGE EMAIL RULES
##############################
STUDENT_EMAIL_DOMAIN=gecbanka.org
STAFF_EMAIL_DOMAIN=gecbanka.org
ALLOWED_EMAIL_DOMAINS=gecbanka.org  # add more with commas


##############################
# ðŸ“… ATTENDANCE PARSER RULES
##############################
BIOMETRIC_MAX_LINES=100000   # Safety limit
BIOMETRIC_REGNO_LENGTH=11
BIOMETRIC_ALLOW_FUTURE_DATES=false


##############################
# ðŸ•˜ ATTENDANCE LOGIC CONFIG
##############################
# Promote -> start new semester (student-only)
# Graduate -> auto remove access + delete past attendance eventually
ATTENDANCE_PRESENT_DEFAULT=true

# Calendar rules
ENABLE_SUNDAYS_OFF=true
ENABLE_HOLIDAYS=true

# Conflict policy: latest upload wins
ATTENDANCE_CONFLICT_POLICY=latest


##############################
# ðŸ‘¨â€ðŸŽ“ STUDENT REG NO RULES
##############################
# For parsing batch/branch from regNo
BATCH_PREFIX_LENGTH=2         # 23 --> 2023 batch
BRANCH_CODE_POSITION=2       # where 104 starts
BRANCH_CODE_LENGTH=3         # EE/ECE etc.
ROLL_NUMBER_LENGTH=3         # last 3 digits


##############################
# ðŸ”„ RATE LIMITING
##############################
RATE_LIMIT_LOGIN=5
RATE_LIMIT_OTP=3
RATE_LIMIT_UPLOAD=2


##############################
# ðŸ›  APP MODE
##############################
NODE_ENV=development  # change to production in Vercel
PORT=3000
